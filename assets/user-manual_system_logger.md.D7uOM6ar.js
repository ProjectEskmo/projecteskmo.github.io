import{_ as s,c as i,o as a,a3 as n}from"./chunks/framework.x_GaNxP8.js";const c=JSON.parse('{"title":"系統日誌","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"user-manual/system/logger.md","filePath":"user-manual/system/logger.md"}'),t={name:"user-manual/system/logger.md"},l=n(`<h1 id="系統日誌" tabindex="-1">系統日誌 <a class="header-anchor" href="#系統日誌" aria-label="Permalink to &quot;系統日誌&quot;">​</a></h1><h2 id="日誌管理器" tabindex="-1">日誌管理器 <a class="header-anchor" href="#日誌管理器" aria-label="Permalink to &quot;日誌管理器&quot;">​</a></h2><p>Eskmo 內建提供日誌管理器，除了輸出在命令行外，也會保存在目錄下的 <code>Logs</code></p><p>檔名以日期時間組成 <code>LOG_YYYYMMDDhhmmss_SSS.txt</code> ，每次啟動都會建立新的檔案</p><h2 id="日誌等級" tabindex="-1">日誌等級 <a class="header-anchor" href="#日誌等級" aria-label="Permalink to &quot;日誌等級&quot;">​</a></h2><p>日誌事件包含 5 個等級：<code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code>, <code>fatal</code></p><p>透過監控 5 個等級的日誌事件來獲得 Eskmo API 日誌相關資訊</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.log.debug</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onDebugLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Debug log:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.log.info</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onInfoLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Info log:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.log.warning</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onWarningLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Warning log:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.log.error</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onErrorLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error log:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.log.fatal</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onFatalLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Fatal log:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.start</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    api.login(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A123456789&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;**********&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;me&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    main()</span></span></code></pre></div><h2 id="日誌格式" tabindex="-1">日誌格式 <a class="header-anchor" href="#日誌格式" aria-label="Permalink to &quot;日誌格式&quot;">​</a></h2><p>日誌格式以 <code>%</code> 開頭，為 <code>[確認碼] [等級] [日期時間] | [進程用途] | [進程PID] | [日誌內容]</code></p><p>範例如下：</p><div class="language-log vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%ZU </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">INFO</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  2024-12-18</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 16:26:49.172760</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | API  | </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">38124</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |The API </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SKCOM_f795df&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> has started successfully.</span></span></code></pre></div><p>由於 Eskmo 涉及多進程運行，日誌行序不保證為紀錄順序，請以時間進行排列</p><p>其中確認碼 (兩碼) 是以後面日誌內容進行加密而得，因此若有人竄改 LOG 將會無法通過驗證</p><p>後續會提供驗證 LOG 檔案的功能</p>`,15),h=[l];function p(e,k,d,r,o,E){return a(),i("div",null,h)}const F=s(t,[["render",p]]);export{c as __pageData,F as default};
