import{_ as t,c as e,o as d,a3 as n}from"./chunks/framework.x_GaNxP8.js";const x=JSON.parse('{"title":"帳務事件","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"user-manual/accounting/events.md","filePath":"user-manual/accounting/events.md"}'),l={name:"user-manual/accounting/events.md"},r=n(`<h1 id="帳務事件" tabindex="-1">帳務事件 <a class="header-anchor" href="#帳務事件" aria-label="Permalink to &quot;帳務事件&quot;">​</a></h1><p>下表為帳務相關事件：</p><table tabindex="0"><thead><tr><th>事件</th><th>註冊方式</th><th>回傳物件</th></tr></thead><tbody><tr><td>未實現損益彙總更新</td><td><a href="/user-manual/accounting/unrealized-pnl.html">@api.event.pnl.unrealized_summary</a></td><td><a href="#pnlunrealizedsummaryresult">PnLUnrealizedSummaryResult</a></td></tr><tr><td>未實現損益明細更新</td><td><a href="/user-manual/accounting/unrealized-pnl.html">@api.event.pnl.unrealized_details</a></td><td><a href="#pnlunrealizeddetailsresult">PnLUnrealizedDetailsResult</a></td></tr><tr><td>已實現損益彙總更新</td><td><a href="/user-manual/accounting/realized-pnl.html">@api.event.pnl.realized_summary</a></td><td><a href="#pnlrealizedsummaryresult">PnLRealizedSummaryResult</a></td></tr><tr><td>已實現損益明細更新</td><td><a href="/user-manual/accounting/realized-pnl.html">@api.event.pnl.realized_details</a></td><td><a href="#pnlrealizeddetailsresult">PnLRealizedDetailsResult</a></td></tr><tr><td>已實現損益依股號彙總更新</td><td><a href="/user-manual/accounting/realized-pnl.html">@api.event.pnl.realized_summary_by_symbol</a></td><td><a href="#pnlrealizedstocksummaryresult">PnLRealizedStockSummaryResult</a></td></tr><tr><td>帳務查詢完成通知</td><td><a href="/user-manual/accounting/unrealized-pnl.html#帳務查詢完成事件">@api.event.pnl.update_finished</a></td><td><code>dict</code>，為空字典 <code>{}</code></td></tr></tbody></table><h2 id="pnlunrealizedsummaryresult" tabindex="-1">PnLUnrealizedSummaryResult <a class="header-anchor" href="#pnlunrealizedsummaryresult" aria-label="Permalink to &quot;PnLUnrealizedSummaryResult&quot;">​</a></h2><p>帳務查詢未實現損益彙總後，取得的查詢結果物件</p><table tabindex="0"><thead><tr><th style="text-align:center;">屬性</th><th style="text-align:center;">型別</th><th>說明</th><th>備註</th></tr></thead><tbody><tr><td style="text-align:center;">stock_name</td><td style="text-align:center;">str</td><td>股票名稱</td><td></td></tr><tr><td style="text-align:center;">symbol_code</td><td style="text-align:center;">str</td><td>股票代號</td><td></td></tr><tr><td style="text-align:center;">currency</td><td style="text-align:center;">str</td><td>幣別</td><td></td></tr><tr><td style="text-align:center;">trade_type</td><td style="text-align:center;">str</td><td>交易種類</td><td></td></tr><tr><td style="text-align:center;">position</td><td style="text-align:center;">str</td><td>庫存股數</td><td></td></tr><tr><td style="text-align:center;">mark_price</td><td style="text-align:center;">str</td><td>市價</td><td></td></tr><tr><td style="text-align:center;">price_changed_today</td><td style="text-align:center;">str</td><td>今日市價漲跌</td><td></td></tr><tr><td style="text-align:center;">market_value</td><td style="text-align:center;">str</td><td>市值</td><td></td></tr><tr><td style="text-align:center;">nav</td><td style="text-align:center;">str</td><td>淨值</td><td></td></tr><tr><td style="text-align:center;">pnl</td><td style="text-align:center;">str</td><td>損益</td><td></td></tr><tr><td style="text-align:center;">avg_price</td><td style="text-align:center;">str</td><td>平均買進(券賣)成本</td><td></td></tr><tr><td style="text-align:center;">cost</td><td style="text-align:center;">str</td><td>付出成本</td><td></td></tr><tr><td style="text-align:center;">deal_price</td><td style="text-align:center;">str</td><td>成交價金</td><td></td></tr><tr><td style="text-align:center;">fee</td><td style="text-align:center;">str</td><td>手續費</td><td></td></tr><tr><td style="text-align:center;">fee_estimated</td><td style="text-align:center;">str</td><td>預估手續費</td><td></td></tr><tr><td style="text-align:center;">tax</td><td style="text-align:center;">str</td><td>交易稅</td><td></td></tr><tr><td style="text-align:center;">tax_estimated</td><td style="text-align:center;">str</td><td>預估交易稅</td><td></td></tr><tr><td style="text-align:center;">margin_funds</td><td style="text-align:center;">str</td><td>融資自備款/融券保證金</td><td></td></tr><tr><td style="text-align:center;">collateral</td><td style="text-align:center;">str</td><td>融資金/擔保品</td><td></td></tr><tr><td style="text-align:center;">dividend_estimated</td><td style="text-align:center;">str</td><td>預估利息</td><td></td></tr><tr><td style="text-align:center;">dividend</td><td style="text-align:center;">str</td><td>股息</td><td></td></tr><tr><td style="text-align:center;">return_estimated</td><td style="text-align:center;">str</td><td>試算報酬率</td><td></td></tr><tr><td style="text-align:center;">unknown_stock_qty</td><td style="text-align:center;">str</td><td>未知成本股數</td><td></td></tr><tr><td style="text-align:center;">note</td><td style="text-align:center;">str</td><td>備註</td><td></td></tr><tr><td style="text-align:center;">has_details</td><td style="text-align:center;">str</td><td>有無詳細資料</td><td><code>Y</code>: 有資料, <code>N</code>: 無資料</td></tr><tr><td style="text-align:center;">sorting_id</td><td style="text-align:center;">str</td><td>排序序號</td><td></td></tr><tr><td style="text-align:center;">trade_type_code</td><td style="text-align:center;">str</td><td>交易種類代號</td><td>0:現股 3:融資(自) 4:融券(自) 8:券差 9:無券賣出</td></tr><tr><td style="text-align:center;">breakeven</td><td style="text-align:center;">str</td><td>損益兩平點</td><td>此欄只提供交易種類為現股之交易</td></tr><tr><td style="text-align:center;">login_id</td><td style="text-align:center;">str</td><td>LOGIN_ID</td><td></td></tr><tr><td style="text-align:center;">account_no</td><td style="text-align:center;">str</td><td>ACCOUNT_NO</td><td></td></tr></tbody></table><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.pnl.unrealized_summary</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onPnL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: PnLUnrealizedSummaryResult):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;未實現損益彙總: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span></code></pre></div><h2 id="pnlunrealizeddetailsresult" tabindex="-1">PnLUnrealizedDetailsResult <a class="header-anchor" href="#pnlunrealizeddetailsresult" aria-label="Permalink to &quot;PnLUnrealizedDetailsResult&quot;">​</a></h2><p>帳務查詢未實現損益明細後，取得的查詢結果物件</p><table tabindex="0"><thead><tr><th style="text-align:center;">屬性</th><th style="text-align:center;">型別</th><th>說明</th><th>備註</th></tr></thead><tbody><tr><td style="text-align:center;">stock_name</td><td style="text-align:center;">str</td><td>股票名稱</td><td></td></tr><tr><td style="text-align:center;">symbol_code</td><td style="text-align:center;">str</td><td>股票代號</td><td></td></tr><tr><td style="text-align:center;">deal_date</td><td style="text-align:center;">str</td><td>成交日期</td><td></td></tr><tr><td style="text-align:center;">trade_type</td><td style="text-align:center;">str</td><td>交易種類</td><td></td></tr><tr><td style="text-align:center;">purchase</td><td style="text-align:center;">str</td><td>買進股數</td><td></td></tr><tr><td style="text-align:center;">offsetable</td><td style="text-align:center;">str</td><td>可沖股數</td><td></td></tr><tr><td style="text-align:center;">avg_price</td><td style="text-align:center;">str</td><td>單價</td><td></td></tr><tr><td style="text-align:center;">deal_price</td><td style="text-align:center;">str</td><td>成交價金</td><td></td></tr><tr><td style="text-align:center;">pnl</td><td style="text-align:center;">str</td><td>損益</td><td></td></tr><tr><td style="text-align:center;">return_rate</td><td style="text-align:center;">str</td><td>試算報酬率</td><td></td></tr><tr><td style="text-align:center;">fee</td><td style="text-align:center;">str</td><td>手續費</td><td></td></tr><tr><td style="text-align:center;">fee_estimated</td><td style="text-align:center;">str</td><td>預估手續費</td><td></td></tr><tr><td style="text-align:center;">tax</td><td style="text-align:center;">str</td><td>交易稅</td><td></td></tr><tr><td style="text-align:center;">tax_estimated</td><td style="text-align:center;">str</td><td>預估交易稅</td><td></td></tr><tr><td style="text-align:center;">margin_funds</td><td style="text-align:center;">str</td><td>融資自備款/融券保證金</td><td></td></tr><tr><td style="text-align:center;">collateral</td><td style="text-align:center;">str</td><td>融資金額/擔保品金額</td><td></td></tr><tr><td style="text-align:center;">lending_interest</td><td style="text-align:center;">str</td><td>融資/融券利息</td><td></td></tr><tr><td style="text-align:center;">short_fee</td><td style="text-align:center;">str</td><td>融券手續費</td><td></td></tr><tr><td style="text-align:center;">payment</td><td style="text-align:center;">str</td><td>收付金額</td><td></td></tr><tr><td style="text-align:center;">dividend</td><td style="text-align:center;">str</td><td>股息</td><td>目前此欄無值</td></tr><tr><td style="text-align:center;">note</td><td style="text-align:center;">str</td><td>備註</td><td></td></tr><tr><td style="text-align:center;">book_no</td><td style="text-align:center;">str</td><td>委託書號</td><td></td></tr><tr><td style="text-align:center;">trade_type_code</td><td style="text-align:center;">str</td><td>交易種類代號</td><td>配合第4欄交易種類 0:現股 3:融資(自) 4:融券(自)</td></tr><tr><td style="text-align:center;">login_id</td><td style="text-align:center;">str</td><td>LOGIN_ID</td><td></td></tr><tr><td style="text-align:center;">account_no</td><td style="text-align:center;">str</td><td>ACCOUNT_NO</td><td></td></tr></tbody></table><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.pnl.unrealized_details</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onPnL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: PnLUnrealizedDetailsResult):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;未實現損益明細: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span></code></pre></div><h2 id="pnlrealizedsummaryresult" tabindex="-1">PnLRealizedSummaryResult <a class="header-anchor" href="#pnlrealizedsummaryresult" aria-label="Permalink to &quot;PnLRealizedSummaryResult&quot;">​</a></h2><p>帳務查詢已實現損益彙總後，取得的查詢結果物件</p><p>markdown 複製程式碼</p><table tabindex="0"><thead><tr><th style="text-align:center;">屬性</th><th style="text-align:center;">型別</th><th>說明</th><th>備註</th></tr></thead><tbody><tr><td style="text-align:center;">trade_type</td><td style="text-align:center;">str</td><td>交易種類</td><td>現股、 融資(代) 、融券(代)、 融資(自) 、融券(自) 、無券、 現沖 、券差、股息</td></tr><tr><td style="text-align:center;">trade_type_code</td><td style="text-align:center;">str</td><td>交易種類代號</td><td>0:現股1:融資(代) 2:融券(代) 3:融資(自) 4:融券(自) 5:無券 6:現沖 8:券差</td></tr><tr><td style="text-align:center;">date</td><td style="text-align:center;">str</td><td>日期</td><td>民國年月日</td></tr><tr><td style="text-align:center;">subsidiary_code</td><td style="text-align:center;">str</td><td>營業單位代碼</td><td></td></tr><tr><td style="text-align:center;">account</td><td style="text-align:center;">str</td><td>證券帳號</td><td></td></tr><tr><td style="text-align:center;">stock_no</td><td style="text-align:center;">str</td><td>股票代號</td><td></td></tr><tr><td style="text-align:center;">qty</td><td style="text-align:center;">str</td><td>股數</td><td></td></tr><tr><td style="text-align:center;">price</td><td style="text-align:center;">str</td><td>成交價格</td><td></td></tr><tr><td style="text-align:center;">pnl</td><td style="text-align:center;">str</td><td>損益</td><td></td></tr><tr><td style="text-align:center;">return_rate</td><td style="text-align:center;">str</td><td>報酬率</td><td></td></tr><tr><td style="text-align:center;">note</td><td style="text-align:center;">str</td><td>備註</td><td></td></tr><tr><td style="text-align:center;">has_details</td><td style="text-align:center;">str</td><td>詳細資料</td><td>Y:有資料 N:無資料</td></tr><tr><td style="text-align:center;">book_no_sell</td><td style="text-align:center;">str</td><td>委託書號(賣)</td><td></td></tr><tr><td style="text-align:center;">seq_no_sell</td><td style="text-align:center;">str</td><td>序號(賣)</td><td></td></tr><tr><td style="text-align:center;">stock_name</td><td style="text-align:center;">str</td><td>股票名稱</td><td></td></tr><tr><td style="text-align:center;">currency</td><td style="text-align:center;">str</td><td>幣別</td><td></td></tr><tr><td style="text-align:center;">investment</td><td style="text-align:center;">str</td><td>投資額</td><td></td></tr><tr><td style="text-align:center;">login_id</td><td style="text-align:center;">str</td><td>LOGIN_ID</td><td></td></tr></tbody></table><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.pnl.realized_summary</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onPnL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: PnLRealizedSummaryResult):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;已實現損益彙總: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span></code></pre></div><h2 id="pnlrealizeddetailsresult" tabindex="-1">PnLRealizedDetailsResult <a class="header-anchor" href="#pnlrealizeddetailsresult" aria-label="Permalink to &quot;PnLRealizedDetailsResult&quot;">​</a></h2><p>帳務查詢已實現損益明細後，取得的查詢結果物件</p><table tabindex="0"><thead><tr><th style="text-align:center;">屬性</th><th style="text-align:center;">型別</th><th>說明</th><th>備註</th></tr></thead><tbody><tr><td style="text-align:center;">date</td><td style="text-align:center;"><code>str</code></td><td>日期</td><td></td></tr><tr><td style="text-align:center;">trade_type</td><td style="text-align:center;"><code>str</code></td><td>交易類型</td><td></td></tr><tr><td style="text-align:center;">stock_no</td><td style="text-align:center;"><code>str</code></td><td>股票代號</td><td></td></tr><tr><td style="text-align:center;">stock_name</td><td style="text-align:center;"><code>str</code></td><td>股票名稱</td><td></td></tr><tr><td style="text-align:center;">book_no</td><td style="text-align:center;"><code>str</code></td><td>帳本編號</td><td></td></tr><tr><td style="text-align:center;">buysell</td><td style="text-align:center;"><code>str</code></td><td>買賣類型</td><td></td></tr><tr><td style="text-align:center;">qty</td><td style="text-align:center;"><code>str</code></td><td>數量</td><td></td></tr><tr><td style="text-align:center;">avg_price</td><td style="text-align:center;"><code>str</code></td><td>平均價格</td><td></td></tr><tr><td style="text-align:center;">deal_price</td><td style="text-align:center;"><code>str</code></td><td>成交價格</td><td></td></tr><tr><td style="text-align:center;">fee</td><td style="text-align:center;"><code>str</code></td><td>手續費</td><td></td></tr><tr><td style="text-align:center;">tax</td><td style="text-align:center;"><code>str</code></td><td>稅金</td><td></td></tr><tr><td style="text-align:center;">margin_funds</td><td style="text-align:center;"><code>str</code></td><td>保證金</td><td></td></tr><tr><td style="text-align:center;">collateral</td><td style="text-align:center;"><code>str</code></td><td>抵押品</td><td></td></tr><tr><td style="text-align:center;">margin_interest</td><td style="text-align:center;"><code>str</code></td><td>保證金利息</td><td></td></tr><tr><td style="text-align:center;">short_fee</td><td style="text-align:center;"><code>str</code></td><td>融券費用</td><td></td></tr><tr><td style="text-align:center;">payment</td><td style="text-align:center;"><code>str</code></td><td>支付金額</td><td></td></tr><tr><td style="text-align:center;">offset_qty</td><td style="text-align:center;"><code>str</code></td><td>可沖銷數量</td><td></td></tr><tr><td style="text-align:center;">note</td><td style="text-align:center;"><code>str</code></td><td>備註</td><td></td></tr><tr><td style="text-align:center;">trade_type_code</td><td style="text-align:center;"><code>str</code></td><td>交易類型代碼</td><td></td></tr><tr><td style="text-align:center;">login_id</td><td style="text-align:center;"><code>str</code></td><td>登錄ID</td><td></td></tr><tr><td style="text-align:center;">account_no</td><td style="text-align:center;">str</td><td>帳戶號碼</td><td></td></tr></tbody></table><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.pnl.realized_details</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onPnL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: PnLRealizedDetailsResult):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;已實現損益明細: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span></code></pre></div><h2 id="pnlrealizedstocksummaryresult" tabindex="-1">PnLRealizedStockSummaryResult <a class="header-anchor" href="#pnlrealizedstocksummaryresult" aria-label="Permalink to &quot;PnLRealizedStockSummaryResult&quot;">​</a></h2><p>帳務查詢已實現損益依股號彙總後，取得的查詢結果物件</p><table tabindex="0"><thead><tr><th style="text-align:center;">屬性</th><th style="text-align:center;">型別</th><th>說明</th><th>備註</th></tr></thead><tbody><tr><td style="text-align:center;">trade_type</td><td style="text-align:center;">str</td><td>交易類型</td><td></td></tr><tr><td style="text-align:center;">trade_type_code</td><td style="text-align:center;">str</td><td>交易類型代碼</td><td></td></tr><tr><td style="text-align:center;">subsidiary_code</td><td style="text-align:center;">str</td><td>子公司代碼</td><td></td></tr><tr><td style="text-align:center;">account</td><td style="text-align:center;">str</td><td>帳戶</td><td></td></tr><tr><td style="text-align:center;">symbol_code</td><td style="text-align:center;">str</td><td>股票代碼</td><td></td></tr><tr><td style="text-align:center;">qty</td><td style="text-align:center;">str</td><td>數量</td><td></td></tr><tr><td style="text-align:center;">pnl</td><td style="text-align:center;">str</td><td>損益</td><td></td></tr><tr><td style="text-align:center;">return_rate</td><td style="text-align:center;">str</td><td>回報率</td><td></td></tr><tr><td style="text-align:center;">currency</td><td style="text-align:center;">str</td><td>貨幣</td><td></td></tr><tr><td style="text-align:center;">login_id</td><td style="text-align:center;">str</td><td>登錄ID</td><td></td></tr></tbody></table><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api.event.pnl.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onPnL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: PnLRealizedStockSummaryResult):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;已實現損益依股號彙總: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data)</span></span></code></pre></div>`,24),a=[r];function s(i,c,y,g,h,p){return d(),e("div",null,a)}const u=t(l,[["render",s]]);export{x as __pageData,u as default};
